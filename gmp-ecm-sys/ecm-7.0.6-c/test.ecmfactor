#!/bin/bash

# test file for ecmfactor
#
# Copyright 2002-2024 Jim Fougeron, Alexander Kruppa, Dave Newman,
# Paul Zimmermann, Cyril Bouvier, David Cleaver.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or (at your
# option) any later version.
# 
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
# or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
# more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program; see the file COPYING.  If not, see
# http://www.gnu.org/licenses/ or write to the Free Software Foundation, Inc.,
# 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.

# check that https://gitlab.inria.fr/zimmerma/ecm/-/issues/21863 is fixed
./ecmfactor -t 2 40386086203521847842442038116961395908045388225743593887534051882867088867451422279926227658353369309602134937818767935489955578234805439581534625494985324713549730074875381338741302421655631135507379857269344735228428553001352597596691638801743636629329355013511352942721273050339170429834278987040381747960884411851433916486144170476008852597093750739127802680309124526032940172579802008470093339990359384991503503614458710698904103258512429909701566697333753540519871100983916899540657050034590964623607736274756781417764221105569531562147057912826327014822324375878810085123801163054580870423717464500275259286644790292287618742984022979008217487409481420224445378839089353872030913057691176817044086502550278535272750787424451118761716552849620868806555149154293300951201837849814408323169458959040706805689440625767829357238882085766112685307073105174963070427573702738362159098805163558648031695168433171835632969724871377060199849541218845177450315677176119955499412825504179204908105894697957170244421770769366517833025139901383316838896066622320648993411213811241118825043233830644947321875736006536117418021434702300430337 1e3
if [ $? != 0 ]
then
   echo "ecmfactor fails in multi-thread mode"
   exit 1
fi
